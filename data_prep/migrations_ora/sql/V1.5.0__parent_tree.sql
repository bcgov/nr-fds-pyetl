-- THE.SEEDLOT_PARENT_TREE definition

-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL

-- Drop table

-- DROP TABLE THE.SEEDLOT_PARENT_TREE;

CREATE TABLE THE.SEEDLOT_PARENT_TREE (
	SEEDLOT_NUMBER VARCHAR2(5),
	PARENT_TREE_ID NUMBER(10,0),
	CONE_COUNT NUMBER(20,10),
	POLLEN_COUNT NUMBER(20,10),
	SMP_SUCCESS_PCT NUMBER(3,0),
	SMP_MIX_LATITUDE_DEGREES NUMBER(2,0),
	SMP_MIX_LATITUDE_MINUTES NUMBER(2,0),
	SMP_MIX_LONGITUDE_DEGREES NUMBER(3,0),
	SMP_MIX_LONGITUDE_MINUTES NUMBER(2,0),
	SMP_MIX_ELEVATION NUMBER(5,0),
	NON_ORCHARD_POLLEN_CONTAM_PCT NUMBER(3,0),
	TOTAL_GENETIC_WORTH_CONTRIB NUMBER,
	REVISION_COUNT NUMBER(5,0),
	CONSTRAINT SPT_PK PRIMARY KEY (SEEDLOT_NUMBER,PARENT_TREE_ID),
	CONSTRAINT SYS_C0010039 CHECK ("SEEDLOT_NUMBER" IS NOT NULL),
	CONSTRAINT SYS_C0010040 CHECK ("PARENT_TREE_ID" IS NOT NULL),
	CONSTRAINT SYS_C0010041 CHECK ("CONE_COUNT" IS NOT NULL),
	CONSTRAINT SYS_C0010042 CHECK ("POLLEN_COUNT" IS NOT NULL),
	CONSTRAINT SYS_C0010043 CHECK ("TOTAL_GENETIC_WORTH_CONTRIB" IS NOT NULL),
	CONSTRAINT SYS_C0010044 CHECK ("REVISION_COUNT" IS NOT NULL)
);
-- CREATE UNIQUE INDEX SPT_PK ON THE.SEEDLOT_PARENT_TREE (SEEDLOT_NUMBER,PARENT_TREE_ID);
CREATE INDEX SPT_PTO_FK_I ON THE.SEEDLOT_PARENT_TREE (PARENT_TREE_ID);
-- THE.SEEDLOT_PARENT_TREE foreign keys
ALTER TABLE THE.SEEDLOT_PARENT_TREE ADD CONSTRAINT SPT_SEE_FK FOREIGN KEY (SEEDLOT_NUMBER) REFERENCES THE.SEEDLOT(SEEDLOT_NUMBER);


-- THE.GENETIC_TYPE_CODE definition

-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL

-- Drop table

-- DROP TABLE THE.GENETIC_TYPE_CODE;

CREATE TABLE THE.GENETIC_TYPE_CODE (
	GENETIC_TYPE_CODE VARCHAR2(2),
	DESCRIPTION VARCHAR2(120),
	EFFECTIVE_DATE DATE,
	EXPIRY_DATE DATE,
	UPDATE_TIMESTAMP DATE,
	CONSTRAINT GTCD_PK PRIMARY KEY (GENETIC_TYPE_CODE),
	CONSTRAINT SYS_C0016643 CHECK ("GENETIC_TYPE_CODE" IS NOT NULL),
	CONSTRAINT SYS_C0016644 CHECK ("DESCRIPTION" IS NOT NULL),
	CONSTRAINT SYS_C0016645 CHECK ("EFFECTIVE_DATE" IS NOT NULL),
	CONSTRAINT SYS_C0016646 CHECK ("EXPIRY_DATE" IS NOT NULL),
	CONSTRAINT SYS_C0016647 CHECK ("UPDATE_TIMESTAMP" IS NOT NULL)
);
-- CREATE UNIQUE INDEX GTCD_PK ON THE.GENETIC_TYPE_CODE (GENETIC_TYPE_CODE);


-- THE.SEEDLOT_PARENT_TREE_GEN_QLTY definition
-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL

-- Drop table

-- DROP TABLE THE.SEEDLOT_PARENT_TREE_GEN_QLTY;
CREATE TABLE THE.SEEDLOT_PARENT_TREE_GEN_QLTY (
	SEEDLOT_NUMBER VARCHAR2(5),
	PARENT_TREE_ID NUMBER(10,0),
	GENETIC_TYPE_CODE VARCHAR2(2),
	GENETIC_WORTH_CODE VARCHAR2(3),
	SEED_PLAN_UNIT_ID NUMBER(10,0),
	GENETIC_QUALITY_VALUE NUMBER(4,1),
	ESTIMATED_IND VARCHAR2(1),
	UNTESTED_IND VARCHAR2(1),
	REVISION_COUNT NUMBER(5,0),
	CONSTRAINT SPTGQ_PK PRIMARY KEY (PARENT_TREE_ID,SEEDLOT_NUMBER,GENETIC_TYPE_CODE,GENETIC_WORTH_CODE),
	CONSTRAINT SYS_C0015861 CHECK ("SEEDLOT_NUMBER" IS NOT NULL),
	CONSTRAINT SYS_C0015862 CHECK ("PARENT_TREE_ID" IS NOT NULL),
	CONSTRAINT SYS_C0015863 CHECK ("GENETIC_TYPE_CODE" IS NOT NULL),
	CONSTRAINT SYS_C0015864 CHECK ("GENETIC_WORTH_CODE" IS NOT NULL),
	CONSTRAINT SYS_C0015865 CHECK ("GENETIC_QUALITY_VALUE" IS NOT NULL),
	CONSTRAINT SYS_C0015866 CHECK ("ESTIMATED_IND" IS NOT NULL),
	CONSTRAINT SYS_C0015867 CHECK ("UNTESTED_IND" IS NOT NULL),
	CONSTRAINT SYS_C0015868 CHECK ("REVISION_COUNT" IS NOT NULL)
);
CREATE INDEX SPTGQ_GTCD_FK_I ON THE.SEEDLOT_PARENT_TREE_GEN_QLTY (GENETIC_TYPE_CODE);
CREATE INDEX SPTGQ_GWC_FK_I ON THE.SEEDLOT_PARENT_TREE_GEN_QLTY (GENETIC_WORTH_CODE);
-- CREATE UNIQUE INDEX SPTGQ_PK ON THE.SEEDLOT_PARENT_TREE_GEN_QLTY (PARENT_TREE_ID,SEEDLOT_NUMBER,GENETIC_TYPE_CODE,GENETIC_WORTH_CODE);
CREATE INDEX SPTGQ_SPT_FK_I ON THE.SEEDLOT_PARENT_TREE_GEN_QLTY (SEEDLOT_NUMBER,PARENT_TREE_ID);
CREATE INDEX SPTGQ_ST2_FK_I ON THE.SEEDLOT_PARENT_TREE_GEN_QLTY (SEED_PLAN_UNIT_ID);


-- THE.SEEDLOT_PARENT_TREE_GEN_QLTY foreign keys

ALTER TABLE THE.SEEDLOT_PARENT_TREE_GEN_QLTY ADD CONSTRAINT SPTGQ_GTCD_FK FOREIGN KEY (GENETIC_TYPE_CODE) REFERENCES THE.GENETIC_TYPE_CODE(GENETIC_TYPE_CODE);
ALTER TABLE THE.SEEDLOT_PARENT_TREE_GEN_QLTY ADD CONSTRAINT SPTGQ_GWC_FK FOREIGN KEY (GENETIC_WORTH_CODE) REFERENCES THE.GENETIC_WORTH_CODE(GENETIC_WORTH_CODE);
ALTER TABLE THE.SEEDLOT_PARENT_TREE_GEN_QLTY ADD CONSTRAINT SPTGQ_SPT_FK FOREIGN KEY (SEEDLOT_NUMBER,PARENT_TREE_ID) REFERENCES THE.SEEDLOT_PARENT_TREE(SEEDLOT_NUMBER,PARENT_TREE_ID);
ALTER TABLE THE.SEEDLOT_PARENT_TREE_GEN_QLTY ADD CONSTRAINT SPTGQ_ST2_FK FOREIGN KEY (SEED_PLAN_UNIT_ID) REFERENCES THE.SEED_PLAN_UNIT(SEED_PLAN_UNIT_ID);



-- THE.SEEDLOT_PARENT_TREE_SMP_MIX definition

-- DDL generated by DBeaver
-- WARNING: It may differ from actual native database DDL

-- Drop table

-- DROP TABLE THE.SEEDLOT_PARENT_TREE_SMP_MIX;

CREATE TABLE THE.SEEDLOT_PARENT_TREE_SMP_MIX (
	SEEDLOT_NUMBER VARCHAR2(5),
	PARENT_TREE_ID NUMBER(10,0),
	GENETIC_TYPE_CODE VARCHAR2(2),
	GENETIC_WORTH_CODE VARCHAR2(3),
	SMP_MIX_VALUE NUMBER(4,1),
	REVISION_COUNT NUMBER(5,0),
	CONSTRAINT SPTSM_PK PRIMARY KEY (PARENT_TREE_ID,SEEDLOT_NUMBER,GENETIC_TYPE_CODE,GENETIC_WORTH_CODE),
	CONSTRAINT SYS_C0020071 CHECK ("SEEDLOT_NUMBER" IS NOT NULL),
	CONSTRAINT SYS_C0020072 CHECK ("PARENT_TREE_ID" IS NOT NULL),
	CONSTRAINT SYS_C0020073 CHECK ("GENETIC_TYPE_CODE" IS NOT NULL),
	CONSTRAINT SYS_C0020074 CHECK ("GENETIC_WORTH_CODE" IS NOT NULL),
	CONSTRAINT SYS_C0020075 CHECK ("SMP_MIX_VALUE" IS NOT NULL),
	CONSTRAINT SYS_C0020076 CHECK ("REVISION_COUNT" IS NOT NULL)
);
CREATE INDEX SPTSM_GTCD_FK_I ON THE.SEEDLOT_PARENT_TREE_SMP_MIX (GENETIC_TYPE_CODE);
CREATE INDEX SPTSM_GWC_FK_I ON THE.SEEDLOT_PARENT_TREE_SMP_MIX (GENETIC_WORTH_CODE);
-- CREATE UNIQUE INDEX SPTSM_PK ON THE.SEEDLOT_PARENT_TREE_SMP_MIX (PARENT_TREE_ID,SEEDLOT_NUMBER,GENETIC_TYPE_CODE,GENETIC_WORTH_CODE);
CREATE INDEX SPTSM_SPT_FK_I ON THE.SEEDLOT_PARENT_TREE_SMP_MIX (SEEDLOT_NUMBER,PARENT_TREE_ID);

-- THE.SEEDLOT_PARENT_TREE_SMP_MIX foreign keys
ALTER TABLE THE.SEEDLOT_PARENT_TREE_SMP_MIX ADD CONSTRAINT SPTSM_GTCD_FK FOREIGN KEY (GENETIC_TYPE_CODE) REFERENCES THE.GENETIC_TYPE_CODE(GENETIC_TYPE_CODE);
ALTER TABLE THE.SEEDLOT_PARENT_TREE_SMP_MIX ADD CONSTRAINT SPTSM_GWC_FK FOREIGN KEY (GENETIC_WORTH_CODE) REFERENCES THE.GENETIC_WORTH_CODE(GENETIC_WORTH_CODE);
ALTER TABLE THE.SEEDLOT_PARENT_TREE_SMP_MIX ADD CONSTRAINT SPTSM_SPT_FK FOREIGN KEY (SEEDLOT_NUMBER,PARENT_TREE_ID) REFERENCES THE.SEEDLOT_PARENT_TREE(SEEDLOT_NUMBER,PARENT_TREE_ID);
